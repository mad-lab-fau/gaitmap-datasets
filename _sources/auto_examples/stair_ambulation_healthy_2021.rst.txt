
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/stair_ambulation_healthy_2021.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_examples_stair_ambulation_healthy_2021.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_stair_ambulation_healthy_2021.py:


StairAmbulationHealthy2021 - A Stride Segmentation and Event Detection dataset with focus on stairs
===================================================================================================

The dataset can be downloaded from here:

.. note:: The dataset only contains the healthy participants of the full dataset presented in the paper!

General information
-------------------
The dataset was recorded with Nilspod V2 sensors from Portabiles.
One sensor was attached on the instep of each foot and one sensor was attached on the lower back.
On loading the transform the coordinate systems of the foot-mounted IMUs to the gaitmap coordinate system.

.. figure:: /images/coordinate_systems/coordinate_transform_nilspodV2_instep_stair_ambulation_ba_liv.svg
    :alt: coordinate system definition
    :figclass: align-center

We provide two `tpcp.Dataset` classes to access the data:

1. :class:`~gaitmap_datasets.StairAmbulationHealthy2021PerTest`: This class allows to access
   all data and events for each of the performed gait tests individually.
2. :class:`~gaitmap_datasets.StairAmbulationHealthy2021Full`: This class allows to access the
   entire recordings for each participant (two recordings per participant) independently of the performed gait tests.

In the following we will show the usage of both classes and the data that is contained within.

.. GENERATED FROM PYTHON SOURCE LINES 29-37

.. warning:: For this example to work, you need to have a global config set containing the path to the dataset.
             Check the `README.md` for more information.

StairAmbulationHealthy2021PerTest
=================================
First we can simply create an instance of the dataset class and directly see the contained data points.
Note, that we will enable the loading of all available data (pressure, baro, and hip sensor).
You might want to disable that, to reduce the RAM usage and speed up the data loading.

.. GENERATED FROM PYTHON SOURCE LINES 37-49

.. code-block:: default

    from joblib import Memory

    from gaitmap_datasets import StairAmbulationHealthy2021PerTest

    dataset = StairAmbulationHealthy2021PerTest(
        include_pressure_data=True,
        include_baro_data=True,
        include_hip_sensor=True,
        memory=Memory("../.cache"),
    )
    dataset






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <h4 style="margin-bottom: 0.1em;">StairAmbulationHealthy2021PerTest [520 groups/rows]</h3>
    <div style="margin-top: 0em">
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table style="margin-left: 3em;">
      <thead>
        <tr style="text-align: right;">
          <th style="text-align: center;"></th>
          <th style="text-align: center;">participant</th>
          <th style="text-align: center;">test</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th style="text-align: center;">2</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_01</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">slope_ascending_normal</td>
        </tr>
        <tr>
          <th style="text-align: center;">3</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_01</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">slope_descending_normal</td>
        </tr>
        <tr>
          <th style="text-align: center;">4</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_01</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">stair_flat_down_fast</td>
        </tr>
        <tr>
          <th style="text-align: center;">5</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_01</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">stair_flat_down_normal</td>
        </tr>
        <tr>
          <th style="text-align: center;">6</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_01</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">stair_flat_down_slow</td>
        </tr>
        <tr>
          <th style="text-align: center;">...</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">...</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">...</td>
        </tr>
        <tr>
          <th style="text-align: center;">555</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_20</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">staircase_down_slow</td>
        </tr>
        <tr>
          <th style="text-align: center;">556</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_20</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">staircase_flying_normal</td>
        </tr>
        <tr>
          <th style="text-align: center;">557</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_20</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">staircase_up_fast</td>
        </tr>
        <tr>
          <th style="text-align: center;">558</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_20</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">staircase_up_normal</td>
        </tr>
        <tr>
          <th style="text-align: center;">559</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_20</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">staircase_up_slow</td>
        </tr>
      </tbody>
    </table>
    <p>520 rows Ã— 2 columns</p>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 50-55

We can see that we have 20 participants and each of them has performed 26 gaittests on different level walking and
stair configurations.
For more information about the individual tests see the documentation of the dataset itself.

Using the dataset class, we can select any subset of tests and participants.

.. GENERATED FROM PYTHON SOURCE LINES 55-60

.. code-block:: default

    subset = dataset.get_subset(
        test=["stair_long_down_normal", "stair_long_up_normal"], participant=["subject_01", "subject_02"]
    )
    subset






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <h4 style="margin-bottom: 0.1em;">StairAmbulationHealthy2021PerTest [4 groups/rows]</h3>
    <div style="margin-top: 0em">
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table style="margin-left: 3em;">
      <thead>
        <tr style="text-align: right;">
          <th style="text-align: center;"></th>
          <th style="text-align: center;">participant</th>
          <th style="text-align: center;">test</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th style="text-align: center;">0</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_01</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">stair_long_down_normal</td>
        </tr>
        <tr>
          <th style="text-align: center;">1</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_01</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">stair_long_up_normal</td>
        </tr>
        <tr>
          <th style="text-align: center;">2</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_02</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">stair_long_down_normal</td>
        </tr>
        <tr>
          <th style="text-align: center;">3</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_02</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">stair_long_up_normal</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 61-63

Once we have the selection of data we want to work with, we can iterate the dataset object to access the data of
individual datapoints or just index it as below.

.. GENERATED FROM PYTHON SOURCE LINES 63-66

.. code-block:: default

    datapoint = subset[0]
    datapoint






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <h4 style="margin-bottom: 0.1em;">StairAmbulationHealthy2021PerTest [1 groups/rows]</h3>
    <div style="margin-top: 0em">
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table style="margin-left: 3em;">
      <thead>
        <tr style="text-align: right;">
          <th style="text-align: center;"></th>
          <th style="text-align: center;">participant</th>
          <th style="text-align: center;">test</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th style="text-align: center;">0</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_01</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">stair_long_down_normal</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 67-70

On this datapoint, we can now access the data.
We will start with the metadata.
It contains all the general information about the participant and the sensors.

.. GENERATED FROM PYTHON SOURCE LINES 70-72

.. code-block:: default

    datapoint.metadata





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    {'subject_id': '001', 'gender': 'm', 'age': 30, 'height': 180, 'weight': 80, 'shoe_size': 43, 'sensor_ids': {'left_sensor': '6f13', 'right_sensor': '48b4', 'hip_sensor': '7fe5'}, 'fsr_ids': {'left_sensor': {'toe': {'id': 11, 'r_ref': 960}, 'mth': {'id': 12, 'r_ref': 1080}, 'heel': {'id': 14, 'r_ref': 1600}}, 'right_sensor': {'toe': {'id': 25, 'r_ref': 960}, 'mth': {'id': 23, 'r_ref': 1040}, 'heel': {'id': 13, 'r_ref': 1750}}}}



.. GENERATED FROM PYTHON SOURCE LINES 73-75

We can also access the imu data, the pressure data and the barometer data.
All of them have an index that marks the seconds from the start of the individual test we selected.

.. GENERATED FROM PYTHON SOURCE LINES 75-78

.. code-block:: default

    imu_data = datapoint.data
    imu_data.head()






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead tr th {
            text-align: left;
        }

        .dataframe thead tr:last-of-type th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr>
          <th></th>
          <th colspan="6" halign="left">hip_sensor</th>
          <th colspan="6" halign="left">right_sensor</th>
          <th colspan="6" halign="left">left_sensor</th>
        </tr>
        <tr>
          <th></th>
          <th>gyr_x</th>
          <th>gyr_y</th>
          <th>gyr_z</th>
          <th>acc_x</th>
          <th>acc_y</th>
          <th>acc_z</th>
          <th>gyr_x</th>
          <th>gyr_y</th>
          <th>gyr_z</th>
          <th>acc_x</th>
          <th>acc_y</th>
          <th>acc_z</th>
          <th>gyr_x</th>
          <th>gyr_y</th>
          <th>gyr_z</th>
          <th>acc_x</th>
          <th>acc_y</th>
          <th>acc_z</th>
        </tr>
        <tr>
          <th>time [s]</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>0.000000</th>
          <td>-0.673821</td>
          <td>-2.219711</td>
          <td>3.989576</td>
          <td>-1.109224</td>
          <td>-0.779031</td>
          <td>3.269550</td>
          <td>-1.708803</td>
          <td>20.533450</td>
          <td>13.178328</td>
          <td>-4.148941</td>
          <td>0.856966</td>
          <td>7.934212</td>
          <td>-27.653339</td>
          <td>46.176474</td>
          <td>1.623280</td>
          <td>-5.973765</td>
          <td>-1.405257</td>
          <td>6.718803</td>
        </tr>
        <tr>
          <th>0.004883</th>
          <td>-0.148201</td>
          <td>0.629284</td>
          <td>3.921438</td>
          <td>-1.242736</td>
          <td>-0.927407</td>
          <td>3.297521</td>
          <td>4.232482</td>
          <td>39.221054</td>
          <td>8.136686</td>
          <td>-4.662022</td>
          <td>0.983592</td>
          <td>7.465433</td>
          <td>-32.374318</td>
          <td>61.496262</td>
          <td>6.074041</td>
          <td>-7.198881</td>
          <td>-1.264667</td>
          <td>5.848837</td>
        </tr>
        <tr>
          <th>0.009766</th>
          <td>0.304408</td>
          <td>2.350481</td>
          <td>3.671904</td>
          <td>-1.360925</td>
          <td>-0.994182</td>
          <td>3.301974</td>
          <td>10.793392</td>
          <td>51.340733</td>
          <td>2.590154</td>
          <td>-5.521944</td>
          <td>0.932085</td>
          <td>6.961508</td>
          <td>-34.805837</td>
          <td>63.604297</td>
          <td>8.223882</td>
          <td>-7.605480</td>
          <td>-1.164228</td>
          <td>5.691747</td>
        </tr>
        <tr>
          <th>0.014648</th>
          <td>0.980363</td>
          <td>2.645559</td>
          <td>3.613431</td>
          <td>-1.436905</td>
          <td>-1.038566</td>
          <td>3.487607</td>
          <td>17.245912</td>
          <td>58.379854</td>
          <td>-1.838347</td>
          <td>-4.657856</td>
          <td>1.070203</td>
          <td>7.428502</td>
          <td>-35.533192</td>
          <td>59.861692</td>
          <td>8.566129</td>
          <td>-7.899871</td>
          <td>-0.896148</td>
          <td>5.474552</td>
        </tr>
        <tr>
          <th>0.019531</th>
          <td>1.588171</td>
          <td>2.643522</td>
          <td>3.801951</td>
          <td>-1.475019</td>
          <td>-1.050089</td>
          <td>3.744858</td>
          <td>25.502436</td>
          <td>71.363512</td>
          <td>-7.721585</td>
          <td>-4.630227</td>
          <td>1.252811</td>
          <td>7.392234</td>
          <td>-34.215627</td>
          <td>51.900007</td>
          <td>8.451064</td>
          <td>-7.865341</td>
          <td>-0.660739</td>
          <td>5.492805</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 79-82

.. code-block:: default

    pressure_data = datapoint.pressure_data
    pressure_data.head()






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead tr th {
            text-align: left;
        }

        .dataframe thead tr:last-of-type th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr>
          <th></th>
          <th colspan="4" halign="left">left_sensor</th>
          <th colspan="4" halign="left">right_sensor</th>
        </tr>
        <tr>
          <th></th>
          <th>toe_force</th>
          <th>mth_force</th>
          <th>heel_force</th>
          <th>total_force</th>
          <th>toe_force</th>
          <th>mth_force</th>
          <th>heel_force</th>
          <th>total_force</th>
        </tr>
        <tr>
          <th>time [s]</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>0.000000</th>
          <td>1.659813</td>
          <td>6.777890</td>
          <td>15.147939</td>
          <td>23.585642</td>
          <td>1.125175</td>
          <td>4.705902</td>
          <td>4.379144</td>
          <td>10.210221</td>
        </tr>
        <tr>
          <th>0.004883</th>
          <td>1.553467</td>
          <td>6.460682</td>
          <td>16.192648</td>
          <td>24.206797</td>
          <td>1.116481</td>
          <td>4.415445</td>
          <td>4.623942</td>
          <td>10.155869</td>
        </tr>
        <tr>
          <th>0.009766</th>
          <td>1.457679</td>
          <td>6.101595</td>
          <td>17.186031</td>
          <td>24.745305</td>
          <td>1.109248</td>
          <td>4.183058</td>
          <td>4.997029</td>
          <td>10.289334</td>
        </tr>
        <tr>
          <th>0.014648</th>
          <td>1.366159</td>
          <td>5.780482</td>
          <td>18.726731</td>
          <td>25.873372</td>
          <td>1.106464</td>
          <td>3.957821</td>
          <td>5.470416</td>
          <td>10.534701</td>
        </tr>
        <tr>
          <th>0.019531</th>
          <td>1.302267</td>
          <td>5.527134</td>
          <td>20.015014</td>
          <td>26.844416</td>
          <td>1.105327</td>
          <td>3.695105</td>
          <td>6.047230</td>
          <td>10.847663</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 83-86

.. code-block:: default

    baro_data = datapoint.baro_data
    baro_data.head()






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead tr th {
            text-align: left;
        }

        .dataframe thead tr:last-of-type th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr>
          <th></th>
          <th>hip_sensor</th>
          <th>right_sensor</th>
          <th>left_sensor</th>
        </tr>
        <tr>
          <th></th>
          <th>baro</th>
          <th>baro</th>
          <th>baro</th>
        </tr>
        <tr>
          <th>time [s]</th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>0.000000</th>
          <td>992.78</td>
          <td>991.94</td>
          <td>992.06</td>
        </tr>
        <tr>
          <th>0.004883</th>
          <td>992.78</td>
          <td>991.94</td>
          <td>992.06</td>
        </tr>
        <tr>
          <th>0.009766</th>
          <td>992.77</td>
          <td>991.94</td>
          <td>992.06</td>
        </tr>
        <tr>
          <th>0.014648</th>
          <td>992.77</td>
          <td>991.94</td>
          <td>992.07</td>
        </tr>
        <tr>
          <th>0.019531</th>
          <td>992.77</td>
          <td>991.94</td>
          <td>992.07</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 87-94

In addition we provide ground truth information for the event detection.
All event data is provided in samples from the start of the test.

Note that we use a trailing `_` to indicate that this is data calculated based on the ground truth and not just the
IMU data.

First, manually labeled stride borders.

.. GENERATED FROM PYTHON SOURCE LINES 94-97

.. code-block:: default

    segmented_stride_list = datapoint.segmented_stride_list_
    segmented_stride_list["left_sensor"]






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>start</th>
          <th>end</th>
        </tr>
        <tr>
          <th>s_id</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>589</th>
          <td>318.0</td>
          <td>567.0</td>
        </tr>
        <tr>
          <th>591</th>
          <td>567.0</td>
          <td>788.0</td>
        </tr>
        <tr>
          <th>593</th>
          <td>788.0</td>
          <td>996.0</td>
        </tr>
        <tr>
          <th>595</th>
          <td>996.0</td>
          <td>1204.0</td>
        </tr>
        <tr>
          <th>597</th>
          <td>1204.0</td>
          <td>1411.0</td>
        </tr>
        <tr>
          <th>599</th>
          <td>1411.0</td>
          <td>1619.0</td>
        </tr>
        <tr>
          <th>601</th>
          <td>1619.0</td>
          <td>1832.0</td>
        </tr>
        <tr>
          <th>603</th>
          <td>1832.0</td>
          <td>2061.0</td>
        </tr>
        <tr>
          <th>605</th>
          <td>2061.0</td>
          <td>2279.0</td>
        </tr>
        <tr>
          <th>607</th>
          <td>2279.0</td>
          <td>2473.0</td>
        </tr>
        <tr>
          <th>609</th>
          <td>2473.0</td>
          <td>2673.0</td>
        </tr>
        <tr>
          <th>611</th>
          <td>2673.0</td>
          <td>2869.0</td>
        </tr>
        <tr>
          <th>613</th>
          <td>2869.0</td>
          <td>3070.0</td>
        </tr>
        <tr>
          <th>615</th>
          <td>3070.0</td>
          <td>3269.0</td>
        </tr>
        <tr>
          <th>617</th>
          <td>3269.0</td>
          <td>3483.0</td>
        </tr>
        <tr>
          <th>619</th>
          <td>3483.0</td>
          <td>3714.0</td>
        </tr>
        <tr>
          <th>621</th>
          <td>3714.0</td>
          <td>3969.0</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 98-101

Second, the events extracted using the pressure-insole.
Note, that the `min_vel` event is actually calculated based on the IMU data.
For more information see the docstring of this property.

.. GENERATED FROM PYTHON SOURCE LINES 101-104

.. code-block:: default

    insole_events = datapoint.pressure_insole_event_list_
    insole_events["left_sensor"]






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>start</th>
          <th>end</th>
          <th>ic</th>
          <th>tc</th>
          <th>min_vel</th>
          <th>pre_ic</th>
        </tr>
        <tr>
          <th>s_id</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>586</th>
          <td>501</td>
          <td>713</td>
          <td>655</td>
          <td>569</td>
          <td>501</td>
          <td>NaN</td>
        </tr>
        <tr>
          <th>588</th>
          <td>713</td>
          <td>925</td>
          <td>869</td>
          <td>789</td>
          <td>713</td>
          <td>655.0</td>
        </tr>
        <tr>
          <th>590</th>
          <td>925</td>
          <td>1131</td>
          <td>1079</td>
          <td>996</td>
          <td>925</td>
          <td>869.0</td>
        </tr>
        <tr>
          <th>592</th>
          <td>1131</td>
          <td>1335</td>
          <td>1285</td>
          <td>1205</td>
          <td>1131</td>
          <td>1079.0</td>
        </tr>
        <tr>
          <th>594</th>
          <td>1335</td>
          <td>1554</td>
          <td>1492</td>
          <td>1410</td>
          <td>1335</td>
          <td>1285.0</td>
        </tr>
        <tr>
          <th>596</th>
          <td>1554</td>
          <td>1754</td>
          <td>1699</td>
          <td>1618</td>
          <td>1554</td>
          <td>1492.0</td>
        </tr>
        <tr>
          <th>598</th>
          <td>1754</td>
          <td>2002</td>
          <td>1927</td>
          <td>1829</td>
          <td>1754</td>
          <td>1699.0</td>
        </tr>
        <tr>
          <th>600</th>
          <td>2002</td>
          <td>2222</td>
          <td>2161</td>
          <td>2061</td>
          <td>2002</td>
          <td>1927.0</td>
        </tr>
        <tr>
          <th>602</th>
          <td>2222</td>
          <td>2406</td>
          <td>2354</td>
          <td>2278</td>
          <td>2222</td>
          <td>2161.0</td>
        </tr>
        <tr>
          <th>604</th>
          <td>2406</td>
          <td>2601</td>
          <td>2553</td>
          <td>2473</td>
          <td>2406</td>
          <td>2354.0</td>
        </tr>
        <tr>
          <th>606</th>
          <td>2601</td>
          <td>2801</td>
          <td>2751</td>
          <td>2671</td>
          <td>2601</td>
          <td>2553.0</td>
        </tr>
        <tr>
          <th>608</th>
          <td>2801</td>
          <td>3008</td>
          <td>2945</td>
          <td>2868</td>
          <td>2801</td>
          <td>2751.0</td>
        </tr>
        <tr>
          <th>610</th>
          <td>3008</td>
          <td>3207</td>
          <td>3148</td>
          <td>3070</td>
          <td>3008</td>
          <td>2945.0</td>
        </tr>
        <tr>
          <th>612</th>
          <td>3207</td>
          <td>3405</td>
          <td>3349</td>
          <td>3268</td>
          <td>3207</td>
          <td>3148.0</td>
        </tr>
        <tr>
          <th>614</th>
          <td>3405</td>
          <td>3644</td>
          <td>3567</td>
          <td>3481</td>
          <td>3405</td>
          <td>3349.0</td>
        </tr>
        <tr>
          <th>616</th>
          <td>3644</td>
          <td>3894</td>
          <td>3811</td>
          <td>3712</td>
          <td>3644</td>
          <td>3567.0</td>
        </tr>
        <tr>
          <th>618</th>
          <td>3894</td>
          <td>4231</td>
          <td>4096</td>
          <td>3970</td>
          <td>3894</td>
          <td>3811.0</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 105-109

As further groundtruth we provide a label for each segmented stride that contains information about the height
change during the stride.
This information is derived by measuring the heights of the individual stair steps and labeling each stride based
on video, to mark all strides that were performed on a specicic stair configuration.

.. GENERATED FROM PYTHON SOURCE LINES 109-111

.. code-block:: default

    datapoint.get_segmented_stride_list_with_type()





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    {'left_sensor':        start     end        type  z_level
    s_id                                     
    589    318.0   567.0       level      0.0
    591    567.0   788.0  descending    -29.0
    593    788.0   996.0  descending    -29.0
    595    996.0  1204.0  descending    -29.0
    597   1204.0  1411.0  descending    -29.0
    599   1411.0  1619.0  descending    -29.0
    601   1619.0  1832.0  descending    -29.0
    603   1832.0  2061.0  descending    -29.0
    605   2061.0  2279.0  descending    -14.5
    607   2279.0  2473.0  descending    -29.0
    609   2473.0  2673.0  descending    -29.0
    611   2673.0  2869.0  descending    -29.0
    613   2869.0  3070.0  descending    -29.0
    615   3070.0  3269.0  descending    -29.0
    617   3269.0  3483.0  descending    -29.0
    619   3483.0  3714.0  descending    -29.0
    621   3714.0  3969.0       level      0.0, 'right_sensor':        start     end        type  z_level
    s_id                                     
    588    169.0   450.0       level      0.0
    590    450.0   682.0  descending    -14.5
    592    682.0   895.0  descending    -29.0
    594    895.0  1106.0  descending    -29.0
    596   1106.0  1309.0  descending    -29.0
    598   1309.0  1513.0  descending    -29.0
    600   1513.0  1720.0  descending    -29.0
    602   1720.0  1950.0  descending    -29.0
    604   1950.0  2183.0  descending    -14.5
    606   2183.0  2377.0  descending    -29.0
    608   2377.0  2576.0  descending    -29.0
    610   2576.0  2773.0  descending    -29.0
    612   2773.0  2972.0  descending    -29.0
    614   2972.0  3170.0  descending    -29.0
    616   3170.0  3378.0  descending    -29.0
    618   3378.0  3593.0  descending    -29.0
    620   3593.0  3842.0  descending    -14.5
    622   3842.0  4131.0       level      0.0}



.. GENERATED FROM PYTHON SOURCE LINES 112-113

The same method used to access this information can also be used to filter the stride list (i.e. only level strides).

.. GENERATED FROM PYTHON SOURCE LINES 113-115

.. code-block:: default

    datapoint.get_segmented_stride_list_with_type(stride_type=["level"])





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    {'left_sensor':        start     end   type  z_level
    s_id                                
    589    318.0   567.0  level      0.0
    621   3714.0  3969.0  level      0.0, 'right_sensor':        start     end   type  z_level
    s_id                                
    588    169.0   450.0  level      0.0
    622   3842.0  4131.0  level      0.0}



.. GENERATED FROM PYTHON SOURCE LINES 116-122

Below we plot all the relevant data for a single gait test to make it easier to understand.

For the selected test, we can see that the participant basically started walking right away.
While it can not be easily seen from the raw data IMU itself, the participant walked down a stair in two bouts.
This can be more clearly seen in the baro data, which shows a slowly increasing pressure value, indicating a
reduction in altitude.

.. GENERATED FROM PYTHON SOURCE LINES 122-137

.. code-block:: default

    import matplotlib.pyplot as plt

    foot = "right_sensor"
    _, axs = plt.subplots(nrows=3, figsize=(10, 10), sharex=True)
    imu_data[foot].filter(like="gyr").plot(ax=axs[0])
    imu_data[foot].filter(like="acc").plot(ax=axs[1])
    baro_data[foot].plot(ax=axs[2])

    axs[0].set_ylabel("Rate of rotation [deg/s]")
    axs[1].set_ylabel("Acceleration [m/s^2]")
    axs[2].set_ylabel("Air Pressure [mbar]")
    axs[2].set_xlabel("Time [s]")

    plt.show()




.. image-sg:: /auto_examples/images/sphx_glr_stair_ambulation_healthy_2021_001.png
   :alt: stair ambulation healthy 2021
   :srcset: /auto_examples/images/sphx_glr_stair_ambulation_healthy_2021_001.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 138-142

When zooming in we can see the individual events withing the strides.
The min_vel event is in the resting period between strides, and the IC and TC events at the falling and rising
edges of pressure signal, respectively.
The start and endpoints of the segmented strides (dashed lines) are at the maximum of the `gyr_y` signal.

.. GENERATED FROM PYTHON SOURCE LINES 142-171

.. code-block:: default


    foot = "right_sensor"
    fig, axs = plt.subplots(nrows=2, figsize=(10, 10), sharex=True)
    imu_data[foot].filter(like="gyr").plot(ax=axs[0])
    pressure_data[foot]["total_force"].plot(ax=axs[1])
    events = insole_events[foot].drop(columns=["start", "end"])
    events /= datapoint.sampling_rate_hz
    styles = ["ro", "gs", "b^", "m*"]
    for style, (i, e) in zip(styles, events.T.iterrows()):
        e = e.dropna()
        axs[0].plot(e, imu_data[foot]["gyr_y"].loc[e.to_numpy()].to_numpy(), style, label=i, markersize=8)
        axs[1].plot(e, pressure_data[foot]["total_force"].loc[e.to_numpy()].to_numpy(), style, markersize=8)
    for i, s in segmented_stride_list[foot].iterrows():
        s /= datapoint.sampling_rate_hz
        axs[0].axvline(s["start"], color="k", linestyle="--")
        axs[0].axvline(s["end"], color="k", linestyle="--")
        axs[1].axvline(s["start"], color="k", linestyle="--")
        axs[1].axvline(s["end"], color="k", linestyle="--")

    axs[0].legend()
    axs[0].set_xlim(12, 15)
    axs[0].set_ylim(-500, 600)

    axs[0].set_ylabel("Rate of rotation [deg/s]")
    axs[1].set_ylabel("Pressure equivalent weight [kg]")
    axs[1].set_xlabel("Time [s]")

    plt.show()




.. image-sg:: /auto_examples/images/sphx_glr_stair_ambulation_healthy_2021_002.png
   :alt: stair ambulation healthy 2021
   :srcset: /auto_examples/images/sphx_glr_stair_ambulation_healthy_2021_002.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 172-181

StairAmbulationHealthy2021Full
==============================
The StairAmbulationHealthy2021Full dataset is contains the complete recordings of all 20 participants, not cut into
individual tests.
Note, that there are still two recordings per participant.
This is because data was collected at two different locations and hence, the data is split into two sections.

The StairAmbulationHealthy2021Full dataclass can be used equivalently to the StairAmbulationHealthyPerTest dataset.
The only difference is that instead of the individual tests, we can see the two parts in the index for the dataset.

.. GENERATED FROM PYTHON SOURCE LINES 181-191

.. code-block:: default

    from gaitmap_datasets import StairAmbulationHealthy2021Full

    dataset = StairAmbulationHealthy2021Full(
        include_pressure_data=True,
        include_baro_data=True,
        include_hip_sensor=True,
        memory=Memory("../.cache"),
    )
    dataset






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <h4 style="margin-bottom: 0.1em;">StairAmbulationHealthy2021Full [40 groups/rows]</h3>
    <div style="margin-top: 0em">
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table style="margin-left: 3em;">
      <thead>
        <tr style="text-align: right;">
          <th style="text-align: center;"></th>
          <th style="text-align: center;">participant</th>
          <th style="text-align: center;">part</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th style="text-align: center;">0</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_01</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">1</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_01</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">2</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_02</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">3</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_02</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">4</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_03</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">5</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_03</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">6</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_04</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">7</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_04</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">8</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_05</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">9</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_05</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">10</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_06</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">11</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_06</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">12</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_07</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">13</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_07</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">14</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_08</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">15</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_08</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">16</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_09</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">17</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_09</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">18</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_10</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">19</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_10</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">20</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_11</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">21</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_11</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">22</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_12</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">23</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_12</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">24</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_13</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">25</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_13</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">26</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_14</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">27</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_14</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">28</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_15</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">29</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_15</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">30</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_16</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">31</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_16</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">32</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_17</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">33</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_17</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">34</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_18</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">35</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_18</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">36</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_19</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">37</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_19</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
        <tr>
          <th style="text-align: center;">38</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_20</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_1</td>
        </tr>
        <tr>
          <th style="text-align: center;">39</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_20</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 192-195

.. code-block:: default

    subset = dataset.get_subset(participant="subject_01", part="part_2")
    subset






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <h4 style="margin-bottom: 0.1em;">StairAmbulationHealthy2021Full [1 groups/rows]</h3>
    <div style="margin-top: 0em">
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table style="margin-left: 3em;">
      <thead>
        <tr style="text-align: right;">
          <th style="text-align: center;"></th>
          <th style="text-align: center;">participant</th>
          <th style="text-align: center;">part</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th style="text-align: center;">0</th>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">subject_01</td>
          <td style="text-align: center; padding-left: 2em; padding-right: 2em;">part_2</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 196-201

As most parameters and attributes are identical, we will not repeat them.

One interesting addition is the `test_list` attribute.
If it is required to understand which tests where performed in the respective sessions, we can access them as a
region-of-interest list.

.. GENERATED FROM PYTHON SOURCE LINES 201-203

.. code-block:: default

    subset.test_list






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>start</th>
          <th>end</th>
        </tr>
        <tr>
          <th>roi_id</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>slope_ascending_normal</th>
          <td>5779</td>
          <td>21912</td>
        </tr>
        <tr>
          <th>slope_descending_normal</th>
          <td>22409</td>
          <td>40494</td>
        </tr>
        <tr>
          <th>stair_flat_down_normal</th>
          <td>41008</td>
          <td>45937</td>
        </tr>
        <tr>
          <th>stair_flat_up_normal</th>
          <td>46470</td>
          <td>49780</td>
        </tr>
        <tr>
          <th>stair_flat_down_fast</th>
          <td>50281</td>
          <td>52782</td>
        </tr>
        <tr>
          <th>stair_flat_up_fast</th>
          <td>53390</td>
          <td>55994</td>
        </tr>
        <tr>
          <th>stair_flat_down_slow</th>
          <td>56552</td>
          <td>60832</td>
        </tr>
        <tr>
          <th>stair_flat_up_slow</th>
          <td>61383</td>
          <td>65989</td>
        </tr>
        <tr>
          <th>stair_long_flying_normal</th>
          <td>66577</td>
          <td>89845</td>
        </tr>
        <tr>
          <th>stair_long_down_normal</th>
          <td>90322</td>
          <td>94722</td>
        </tr>
        <tr>
          <th>stair_long_up_normal</th>
          <td>95201</td>
          <td>100466</td>
        </tr>
        <tr>
          <th>stair_long_down_fast</th>
          <td>100961</td>
          <td>104364</td>
        </tr>
        <tr>
          <th>stair_long_up_fast</th>
          <td>104874</td>
          <td>108498</td>
        </tr>
        <tr>
          <th>stair_long_down_slow</th>
          <td>109186</td>
          <td>117087</td>
        </tr>
        <tr>
          <th>stair_long_up_slow</th>
          <td>117571</td>
          <td>125476</td>
        </tr>
        <tr>
          <th>stair_long_down_single_step</th>
          <td>126056</td>
          <td>135266</td>
        </tr>
        <tr>
          <th>stair_long_up_single_step</th>
          <td>135727</td>
          <td>145803</td>
        </tr>
        <tr>
          <th>stair_long_down_double_step</th>
          <td>146219</td>
          <td>149371</td>
        </tr>
        <tr>
          <th>stair_long_up_double_step</th>
          <td>149853</td>
          <td>153682</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 204-210

When plotting the data in the entire `part_2` recording, we can see that it spans multiple tests including multiple
walks up and down various stairs.

If you would zoom in, you can see that between each test, the participants were instructed to jump up and down 3
times.
These jump events were used as marker to cut the individual tests.

.. GENERATED FROM PYTHON SOURCE LINES 210-232

.. code-block:: default

    imu_data = subset.data
    baro_data = subset.baro_data

    foot = "right_sensor"
    _, axs = plt.subplots(nrows=3, figsize=(10, 10), sharex=True)
    imu_data[foot].filter(like="gyr").plot(ax=axs[0])
    imu_data[foot].filter(like="acc").plot(ax=axs[1])
    baro_data[foot].plot(ax=axs[2])
    for i, s in subset.test_list.iterrows():
        s /= subset.sampling_rate_hz
        axs[0].axvspan(s["start"], s["end"], color="k", alpha=0.2)
        axs[1].axvspan(s["start"], s["end"], color="k", alpha=0.2)
        axs[2].axvspan(s["start"], s["end"], color="k", alpha=0.2)

    axs[0].set_ylabel("Rate of rotation [deg/s]")
    axs[1].set_ylabel("Acceleration [m/s^2]")
    axs[2].set_ylabel("Air Pressure [mbar]")
    axs[2].set_xlabel("Time [s]")

    plt.xlim(550, 650)
    plt.show()




.. image-sg:: /auto_examples/images/sphx_glr_stair_ambulation_healthy_2021_003.png
   :alt: stair ambulation healthy 2021
   :srcset: /auto_examples/images/sphx_glr_stair_ambulation_healthy_2021_003.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 233-244

A note on caching
=================
To make it possible to interact with the entire dataset, without filling your RAM immediately, all data is only
loaded once you access the respective data attribute (e.g. `data` or `pressure_data`).
However, this means, if you access the same piece of data multiple times (or multiple pieces of related data),
data needs to be loaded again from disk and preprocessed.
This is slow.
Therefore, we allow to use `joblib.Memory` to cache the data in a fast disk cache.
You can configure the cache directory using the `memory` parameter of the dataset class.
Keep in mind, that the cache directory can become quite large.
We recommend clearing the cache from time to time, to free up space.


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  5.850 seconds)

**Estimated memory usage:**  142 MB


.. _sphx_glr_download_auto_examples_stair_ambulation_healthy_2021.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example


    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: stair_ambulation_healthy_2021.py <stair_ambulation_healthy_2021.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: stair_ambulation_healthy_2021.ipynb <stair_ambulation_healthy_2021.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
